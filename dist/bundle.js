!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t){let i=document.getElementById("restart"),n=document.getElementById("widthslider"),o=document.getElementById("widthlabel"),r=document.getElementById("heightslider"),l=document.getElementById("heightlabel"),s=document.getElementById("bombslider"),a=document.getElementById("bomblabel");document.getElementById("message");n.onchange=(e=>o.innerHTML=e.target.value),n.oninput=(e=>o.innerHTML=e.target.value),r.onchange=(e=>l.innerHTML=e.target.value),r.oninput=(e=>l.innerHTML=e.target.value),s.onchange=(e=>a.innerHTML=e.target.value),s.oninput=(e=>a.innerHTML=e.target.value),e.exports={button:i,widthSlider:n,heightSlider:r,bombSlider:s}},function(e,t,i){"use strict";i.r(t);let n=document.getElementById("canvas"),o=n.getContext("2d");o.height=n.height,o.width=n.height;var r=o;class l{constructor(e,t,i,n){this.x=e,this.y=t,this.w=i,this.h=n,this.isBomb=!1,this.numBombs=0,this.isRevealed=!1,this.isMarked=!1}setBomb(){this.isBomb=!0}draw(){this.isRevealed?r.fillStyle=this.isBomb?"red":"green":this.isMarked?r.fillStyle="darkred":r.fillStyle="yellow",r.fillRect(this.x,this.y,this.w,this.h),r.strokeStyle="black",r.lineWidth=1,r.strokeRect(this.x,this.y,this.w,this.h),r.fillStyle="black",r.lineWidth=10,!this.isBomb&&this.isRevealed&&r.fillText(this.numBombs+"",this.x+this.w/2,this.y+this.h/2,this.w)}check(){return this.isRevealed=!0,!!this.isBomb&&(this.draw(),!0)}mark(){return this.isMarked=!this.isMarked,this.isMarked}}var s=i(0);let a,h,d,u,c=!1,f=10,m=10,b=r.width/f,g=r.height/m;function v(e,t){let i=[];for(let n=e-1;n<e+2;n++)for(let o=t-1;o<t+2;o++){if(n<0||o<0)continue;let r=u[n+o*f];void 0===r||e==n&&t==o||n==f||o==m||i.push(r)}return i}function y(e,t,i){c=!1,a=0,h=0,d=i,f=e,m=t,u=[],b=r.width/f,g=r.height/m;for(let e=0;e<m;e++)for(let t=0;t<f;t++){let i=t*b,n=e*g;u.push(new l(i,n,b,g,Math.random()))}!function(e){let t,i=f*m;e>f*m&&(alert("Too many bombs! Setting them to "+i/2),e=i/2);for(let i=0;i<e;i++){for(t=Math.floor(Math.random()*f*m);u[t].isBomb;)t=Math.floor(Math.random()*f*m);u[t].setBomb()}}(i),function(){for(let e=0;e<f;e++)for(let t=0;t<m;t++){let i=u[e+t*m];if(i.isBomb)continue;let n=v(e,t);for(let e of n)e.isBomb&&i.numBombs++}}()}function w(){r.fillStyle="red",r.fillRect(0,0,r.width,r.height);for(let e of u)e.draw();requestAnimationFrame(w)}function B(e){if(!c&&!e.isMarked&&!e.isRevealed){if(e.check())return c=!0,u.forEach(e=>e.isRevealed=!0),void alert("Game Over!");if(h++,M(),0==e.numBombs){let t,i;for(let n=0;n<f;n++)for(let o=0;o<m;o++){let r=u[n+o*f];r.x==e.x&&r.y==e.y&&(t=n,i=o)}let n=v(t,i);for(let e=0;e<n.length;e++)B(n[e])}}}window.onload=(()=>{document.addEventListener("contextmenu",e=>e.preventDefault()),s.button.onclick=(()=>y(s.widthSlider.value,s.heightSlider.value,s.bombSlider.value)),y(f,m,10),requestAnimationFrame(w)});let p=document.getElementById("canvas");function M(){a==d&&h==f*m-d&&alert("You win!")}p.onmousedown=(e=>{e.preventDefault();let t=e.pageX-p.offsetLeft,i=e.pageY-p.offsetTop;t=Math.floor(t/b),i=Math.floor(i/g);let n=u[t+i*f];switch(e.which){case 1:B(n);break;case 2:if(!n.isRevealed)return;v(t,i).forEach(B);break;case 3:n.mark()?a++:a--,M()}})}]);